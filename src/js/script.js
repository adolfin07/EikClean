document.addEventListener('DOMContentLoaded',()=>{const btn=document.getElementById('menu-btn');const sidebar=document.getElementById('sidebar');const overlay=document.getElementById('overlay');const openIcon=document.getElementById('menu-open-icon');const closeIcon=document.getElementById('menu-close-icon');function toggleSidebar(open){sidebar.classList.toggle('-translate-x-full',!open);sidebar.setAttribute('aria-hidden',!open);if(overlay){overlay.classList.toggle('opacity-0',!open);overlay.classList.toggle('pointer-events-none',!open);overlay.classList.toggle('opacity-100',open);overlay.classList.toggle('pointer-events-auto',open)}
btn.setAttribute('aria-expanded',open);openIcon.classList.toggle('hidden',open);closeIcon.classList.toggle('hidden',!open)}
btn.addEventListener('click',()=>{const isOpen=!sidebar.classList.contains('-translate-x-full');toggleSidebar(!isOpen)});if(overlay){overlay.addEventListener('click',()=>toggleSidebar(!1))}
sidebar.querySelectorAll('a[href^="#"]').forEach(link=>{link.addEventListener('click',e=>{const targetId=link.getAttribute('href').substring(1);const targetEl=document.getElementById(targetId);if(targetEl){e.preventDefault();targetEl.scrollIntoView({behavior:'smooth'});history.pushState(null,'',`#${targetId}`)}
toggleSidebar(!1)})});let resizeTimeout;window.addEventListener('resize',()=>{clearTimeout(resizeTimeout);resizeTimeout=setTimeout(()=>{if(window.innerWidth>=768)toggleSidebar(!1);},200)});const observer=new IntersectionObserver((entries,obs)=>{entries.forEach(entry=>{if(!entry.isIntersecting)return;const el=entry.target;switch(el.id){case 'info-text':el.classList.remove('opacity-0','translate-y-10');el.classList.add('opacity-100','translate-y-0');break;case 'info-img':el.classList.remove('opacity-0','scale-90');el.classList.add('opacity-100','scale-100');break;default:el.classList.remove('opacity-0','translate-y-10');el.classList.add('opacity-100','translate-y-0');break}
obs.unobserve(el)})},{threshold:0.2});const animateTargets=[document.getElementById('info-text'),document.getElementById('info-img'),document.getElementById('servicios-title'),document.getElementById('servicios-intro'),...document.querySelectorAll('.service-card'),document.getElementById('servicios-cta'),document.getElementById('servicios-testimonial'),document.getElementById('contacto-title'),document.getElementById('contacto-desc'),document.getElementById('contacto-social'),document.getElementById('contacto-medios')].filter(Boolean);animateTargets.forEach(el=>observer.observe(el))})